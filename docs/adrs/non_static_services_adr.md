# ADR-001: Использование экземпляров (синглтонов) для сервисов

**Статус:** Принято

## Контекст

Приложение использует сервисы (`ProjectService`, `FileSystemService`) для инкапсуляции логики. Некоторые из этих сервисов (например, `FileSystemService`) на начальном этапе являются "stateless" — их методы не используют внутреннее состояние экземпляра (`this`).

Это поднимает вопрос: должны ли такие методы быть статическими, или мы должны использовать экземпляры классов?

Правило линтера `class-methods-use-this` будет отмечать методы экземпляра, которые не используют `this`.

## Решение

Все сервисы в приложении реализуются как классы и предоставляются в виде единственного экземпляра (синглтона).

Методы сервисов остаются методами экземпляра (не статическими), даже если они временно не используют `this`. Мы осознанно принимаем или отключаем предупреждения от правила `class-methods-use-this` для этих случаев.

## Обоснование и последствия

### Преимущества

1. **Тестируемость:** Главный драйвер решения. Сервисы, основанные на экземплярах, легко подменяются "моками" (mocks) в тестах. Это позволяет проводить полноценное юнит-тестирование компонентов в изоляции.
2. **Гибкость:** Stateless-сервис может легко стать stateful в будущем (например, для добавления логирования, кэширования) без изменения его публичного API и нарушения работы зависимых модулей.
3. **Консистентность:** Все сервисы в проекте следуют единому паттерну, что делает архитектуру предсказуемой.

### Недостатки

* **Нарушение правила линтера:** Необходимо будет обрабатывать предупреждения от `class-methods-use-this`.
* **Небольшое усложнение:** Для чисто утилитарных, stateless классов этот паттерн чуть сложнее, чем использование статических методов. Однако, преимущества в гибкости и тестируемости перевешивают этот недостаток.
